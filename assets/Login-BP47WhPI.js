import{r as t,A as f,u as w,j as e,i as m,b as j,L as y,s as b}from"./index-DgxHdI_C.js";import{o as v,s as d,u as N,a as S}from"./schemas-1DDbcmeQ.js";const k=v({email:d().nonempty("email is required").regex(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"invalid email"),password:d().nonempty("password is required").regex(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=\S+$).{8,20}$/,"invalid password")});function z(){let{setuserToken:c}=t.useContext(f);const u=w(),[r,x]=t.useState(null),[p,o]=t.useState(!1);let{handleSubmit:g,register:i,formState:{errors:s,touchedFields:l}}=N({defaultValues:{email:"",password:""},resolver:S(k),mode:"onBlur",reValidateMode:"onBlur"});async function h(n){o(!0);const a=await b(n);console.log("submit",n),a.message=="success"?(localStorage.setItem("token",a.token),c(a.token),u("/Home")):x(a.error),o(!1)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mx-auto bg-gray-300",children:e.jsx("div",{className:"bg-gray-200 min-h-screen text-center flex justify-center items-center",children:e.jsxs("div",{className:"sm:w-full md:w-1/3 p-5 m-auto bg-white shadow rounded-2xl",children:[e.jsx("h2",{className:"text-2xl my-4 font-bold text-sky-700",children:"Login now"}),e.jsxs("form",{onSubmit:g(h),children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(m,{isInvalid:!!(s.email&&l.email),errorMessage:s.email?.message,...i("email"),label:"email",type:"email"}),e.jsx(m,{isInvalid:!!(s.password&&l.password),errorMessage:s.password?.message,...i("password"),label:"password",type:"password"})]}),r?e.jsx("p",{className:"text-red-500 py-2",children:r}):null,e.jsx(j,{isLoading:p,type:"submit",className:"w-full my-4",color:"primary",variant:"shadow",children:"Submit"}),e.jsxs("p",{children:["Does not you have an account ? ",e.jsx(y,{className:"text-sky-600",to:"/Register",children:"sign up"})]})]})]})})})})}export{z as default};
